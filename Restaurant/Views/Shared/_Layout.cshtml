@{
    var admin = Context.Session.GetString("admin");
    var staff = Context.Session.GetString("staff");
    var username = Context.Session.GetString("username");
}
<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>@ViewData["Title"] - Restaurant</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="~/css/site.css?v=1.0.1" asp-append-version="true"/>
    <link rel="stylesheet" href="~/Restaurant.styles.css" asp-append-version="true"/>
    <link rel="stylesheet" href="~/css/main.css?v=1.0.1" asp-append-version="true"/>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-..."
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    />
    <style>
        .disabled-link {
            pointer-events: none;
            opacity: 0.5;
            cursor: default;
        }

        .search-bar {
            position: relative;
        }

        .search-bar input {
            transition: all 0.3s ease;
        }

        .search-bar input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(255, 205, 57, 0.5);
            border-color: #ffcd39;
        }
    </style>
</head>
<body id="home">
<header>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm mb-3">
        <div id="site-header" class="header-div" style="z-index: 2; width: 100%">
            <div class="left-div">
                @if (admin != "true" && staff != "true")
                {
                    <div class="search-bar">
                        <form id="search-form" asp-controller="Home" asp-action="Receipt" method="get">
                            <i id="search-icon" class="fa-solid fa-magnifying-glass"></i>
                            <input id="receipt-search" name="receiptSearch" type="text" maxlength="12" placeholder="Reservation ID" autocomplete="off"></input>
                            <div id="sbmt-div"><button type="submit" id="submit-btn"><i id="arrw-rght" class="fa-solid fa-arrow-right"></i></button></div>
                        </form>
                    </div>
                }

                @if (admin == "true" && staff != "true")
                {
                    <div id="loggedIn">
                        <a asp-controller="Home" asp-action="Admin" style="cursor: default"><img src="~/images/maintenance.png" alt="maintenance" id="maintenance" style="width: 2rem; margin-left: 2rem;"></a>
                        <p style="font-family: 'Noto Sans Batak'; font-size: large; color: white; display: inline-block; margin-left: 0.5rem; padding-right: 2rem; padding-top: 1rem">Logged in as <span style="color: #ffcd39">@username</span></p>
                    </div>
                }
                @if (staff == "true" && admin != "true")
                {
                    <div id="loggedIn">
                        <a asp-controller="Home" asp-action="Staff" style="cursor: default"><img src="~/images/reservations.png" alt="maintenance" id="maintenance" style="width: 2rem; margin-left: 2rem;"></a>
                        <p style="font-family: 'Noto Sans Batak'; font-size: large; color: white; display: inline-block; margin-left: 0.5rem; padding-right: 2rem; padding-top: 1rem">Logged in as <span style="color: #ffcd39">@username</span></p>
                    </div>
                }
            </div>
            <div class="middle-div">
                <div class="middle-l text-center">
                    <a asp-controller="Home" asp-action="Menu" style="color: inherit; text-decoration: none" id="menulink"><h3 id="menu" class="action_button">MENU</h3></a>
                </div>
                <div class="middle-m">
                    <a class="navbar-brand" asp-controller="Home" asp-action="Index"> <!-- Anasayfaya yonlendir -->
                        <img src="~/images/laylogo.png" alt="Logo" height="60px" style="display: inline-block">
                    </a>
                </div>
                <div class="middle-r text-center">
                    <a asp-controller="Home" asp-action="Booking" style="text-decoration: none; color: inherit" id="booklink"><h3 id="book" class="action_button">BOOK A TABLE</h3></a>
                </div>
            </div>
            <div class="right-div">
                <div class="tel-no" style="color: white; text-align: end; padding-right: 30px; font-size: large">
                    <text>+90 232 152 6379</text>
                </div>
                <div id="links" style="color: white; text-align: end; padding-right: 15px; font-size: large; margin-top: 0.5rem">
                    <a style="text-decoration: none; color: inherit" href="https://www.face.com/">
                        <i id="face-icon" class="fab fa-facebook"></i>
                    </a>
                    <a style="text-decoration: none; color: inherit" href="https://www.x.com/">
                        <i id="x-icon" class="fab fa-x-twitter"></i>
                    </a>
                    <a style="text-decoration: none; color: inherit" href="https://www.instagram.com/">
                        <i id="insta-icon" class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- Success/Error Messages -->
@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin: 0;">
        <strong>Success!</strong> @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert" style="margin: 0;">
        <strong>Error!</strong> @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="" style="">
    <main role="main" class="pb-3">
        @RenderBody()
    </main>
</div>

<footer class="footer text-muted navbar-transparent" style="display: flex; background-color: rgba(35, 35, 35, 0.9)">
    <div style="flex: 1; width: 100%; max-height: 70px; color: white">
        &nbsp;&nbsp;&nbsp;&copy; 2025 - LITES - All Rights Reserved - <a asp-area="" asp-controller="Home" asp-action="Privacy" id="privacy">Privacy</a>
    </div>
    <div style="flex: 1; text-align: end">
        @if (admin != "true" && staff != "true")
        {
            <a asp-controller="Home" asp-action="Login" id="login">Login</a>
        }
        @if (admin == "true" || staff == "true")
        {
            <a asp-controller="Home" asp-action="Logout" id="logout">Logout</a>
        }
    </div>
</footer>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
@await RenderSectionAsync("Scripts", required: false)
</body>
<script>
    // Checking if the current url is /Home/Menu
    if (window.location.pathname.toLowerCase() === "/home/menu") {
        document.getElementById("menulink").classList.add("disabled-link");
    }
    // Checking if the current url is /Home/Booking
    if (window.location.pathname.toLowerCase() === "/home/booking") {
        document.getElementById("booklink").classList.add("disabled-link");
    }

    if (window.location.pathname.toLowerCase() !== "/") {
        const header = document.getElementById("site-header");
        if (header) {
            header.style.backgroundColor = "rgba(35, 35, 35, 0.9)";
        }
    }

    // Simple form validation for reservation search
    document.addEventListener('DOMContentLoaded', function() {
        const searchForm = document.getElementById('search-form');
        const searchInput = document.getElementById('receipt-search');

        if (searchForm && searchInput) {
            // Handle form submission
            searchForm.addEventListener('submit', function(e) {
                const query = searchInput.value.trim();
                if (!query) {
                    e.preventDefault();
                    alert('Please enter a reservation ID');
                }
            });
        }

        // Auto-hide alerts after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                if (alert.classList.contains('show')) {
                    alert.classList.remove('show');
                    setTimeout(() => alert.remove(), 150);
                }
            });
        }, 5000);
    });
</script>
</html>